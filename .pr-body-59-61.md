## Summary

This PR implements two related features for MindRobo's onboarding flow:

1. **Agent Personality Builder API** (#59) - allows businesses to configure their AI receptionist's personality
2. **Phone Number Setup API** (#61) - enables phone number purchasing and forwarding via Twilio

## Changes

### Agent Personality API (#59)

**Database:**
- Added fields to `Business` model:
  - `business_description` (text)
  - `services_and_prices` (text)
  - `lead_handling_preference` (enum: book_appointment / send_sms / take_message)
  - `custom_greeting` (text, auto-generated)
  - `system_prompt` (text, auto-generated)

**Endpoints:**
- `PUT /api/v1/businesses/{id}/personality` - save personality config
- `GET /api/v1/businesses/{id}/personality` - retrieve personality config

**Features:**
- Auto-generates Retell-ready system prompt from personality fields
- Generates custom greeting based on business info
- Template: "You are an AI receptionist for {business_name}. {business_description}. Services offered: {services_and_prices}. The owner's name is {owner_name}. When a caller needs help, {lead_handling_instruction}. Always be friendly, professional, and helpful."

### Phone Number Setup API (#61)

**Database:**
- Added `phone_setup_type` enum field (purchased / forwarded)

**Endpoints:**
- `GET /api/v1/phone/available?area_code=XXX` - search Twilio for available local numbers
- `POST /api/v1/phone/purchase` - buy selected number and save to business
- `POST /api/v1/phone/forward` - save existing number for forwarding setup

**Environment Variables (required):**
- `TWILIO_ACCOUNT_SID`
- `TWILIO_AUTH_TOKEN`

**Error Handling:**
- Returns 503 when Twilio credentials missing
- Returns 404 when no numbers available in area code
- Returns 400 with Twilio error details on purchase failure

## Migration

Run migration to add new fields:
```bash
alembic upgrade head
```

## QA Checklist

### Personality API
- [ ] Can save personality config with all fields
- [ ] Auto-generates custom_greeting correctly
- [ ] Auto-generates system_prompt with proper template
- [ ] Can retrieve saved personality config
- [ ] Validates lead_handling_preference enum values
- [ ] Updates owner_name if provided in personality

### Phone API
- [ ] Returns 503 when TWILIO_ACCOUNT_SID missing
- [ ] Returns 503 when TWILIO_AUTH_TOKEN missing
- [ ] Can search for available numbers without area code
- [ ] Can search for numbers with specific area code
- [ ] Returns 400 for invalid area code format
- [ ] Returns 404 when no numbers available
- [ ] Can purchase a number and saves to business.twilio_phone_number
- [ ] Sets phone_setup_type to "purchased" after purchase
- [ ] Can configure forwarding for existing number
- [ ] Sets phone_setup_type to "forwarded" for forwarding
- [ ] Validates E.164 phone format for forwarding

### General
- [ ] No hardcoded credentials anywhere
- [ ] Migration runs successfully
- [ ] All new endpoints require authentication
- [ ] User can only access their own business data

## Testing

```bash
# Example: Save personality
curl -X PUT http://localhost:8000/api/v1/businesses/{id}/personality \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "business_description": "A professional roofing company serving the Bay Area for 20 years",
    "services_and_prices": "Roof repair ($500-2000), Full roof replacement ($8000-15000), Emergency services ($300+)",
    "owner_name": "John Smith",
    "lead_handling_preference": "book_appointment"
  }'

# Example: Search for numbers
curl http://localhost:8000/api/v1/phone/available?area_code=415 \
  -H "Authorization: Bearer <token>"

# Example: Purchase number
curl -X POST http://localhost:8000/api/v1/phone/purchase \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{"phone_number": "+14155551234"}'
```

## Related Issues

Closes #59
Closes #61
